{"version":3,"sources":["components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/Searchbar/Searchbar.js","components/Button/Button.js","components/Loader/Loader.styled.jsx","components/Loader/Loader.js","services/pixabay-api.js","App.js","index.js"],"names":["GalleryItem","image","onOpenModal","largeImageURL","className","src","webformatURL","alt","onClick","ImageGallery","images","map","id","modalRoot","document","getElementById","Modal","componentWillUnmount","e","window","removeEventListener","handleKeyDown","code","props","handleBackDropClick","currentTarget","target","addEventListener","this","createPortal","children","Component","Searchbar","state","query","handleChangeQuery","name","value","setState","handleSubmit","preventDefault","onSubmit","reset","type","onChange","autoComplete","autoFocus","placeholder","Button","LoaderSpinner","styled","div","LoaderIcon","color","height","width","timeout","axios","defaults","baseURL","api","getPictures","page","get","then","response","data","hits","App","error","isLoading","showModal","largeImage","handleSearchBarSubmit","prevState","catch","finally","toggleShowModal","dataset","img","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","Loader","length","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.85469846.chunk.js","sourcesContent":["import PropTypes from \"prop-types\";\r\n\r\nfunction GalleryItem({ image, largeImageURL, onOpenModal }) {\r\n  return (\r\n    <li className=\"ImageGalleryItem\">\r\n      <img\r\n        src={image.webformatURL}\r\n        alt=\"\"\r\n        className=\"ImageGalleryItem-image\"\r\n        data-img={image.largeImageURL}\r\n        onClick={onOpenModal}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nGalleryItem.propTypes = {\r\n  image: PropTypes.array.isRequired,\r\n  largeImageURL: PropTypes.array.isRequired,\r\n  onOpenModal: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default GalleryItem;\r\n","import PropTypes from \"prop-types\";\r\n\r\nimport GalleryItem from \"./ImageGalleryItem\";\r\n\r\nfunction ImageGallery({ images, onOpenModal }) {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {images.map((image) => (\r\n        <GalleryItem image={image} key={image.id} onOpenModal={onOpenModal} />\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.array.isRequired,\r\n  onOpenModal: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from \"react\";\r\n//метод из ReactDOM для создания портала разметки модалки\r\nimport { createPortal } from \"react-dom\";\r\n\r\n//портал для разметки модалки\r\nconst modalRoot = document.getElementById(\"modal-root\");\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  //метод для очистки слушателя событий\r\n  componentWillUnmount = (e) => {\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  };\r\n\r\n  //метод для закрытия модалки по кнопке Escape\r\n  handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClick();\r\n    }\r\n  };\r\n\r\n  //метод для закрытия модалки по backdrop\r\n  handleBackDropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClick();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleBackDropClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\nexport default Modal;\r\n","import React, { Component } from \"react\";\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    query: \"\",\r\n  };\r\n\r\n  //метод, который будет обновлять состояние input\r\n  handleChangeQuery = (e) => {\r\n    const { name, value } = e.currentTarget;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  //метод для отправки form\r\n  handleSubmit = (e) => {\r\n    //функция, чтобы старница не перезагружалась при submit\r\n    e.preventDefault();\r\n    //передаем props Компонента SearchBar (ребенка) в Компонент App (родитель)\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({\r\n      query: \"\",\r\n    });\r\n    //очищаем поле поиса\r\n    this.props.reset();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            onChange={this.handleChangeQuery}\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            name=\"query\"\r\n            value={this.state.query}\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import PropTypes from \"prop-types\";\r\n\r\nfunction Button({ onClick }) {\r\n  return (\r\n    <>\r\n      <button type=\"button\" className=\"Button\" onClick={onClick}>\r\n        Load more\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import styled from \"@emotion/styled\";\r\n\r\nexport const LoaderSpinner = styled.div`\r\n    position: absolute;\r\n    display: block;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    content: \"\";\r\n`;","import { LoaderSpinner } from \"./Loader.styled.jsx\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nfunction LoaderIcon() {\r\n  return (\r\n    <LoaderSpinner>\r\n      <Loader\r\n        type=\"Puff\"\r\n        color=\"#000080\"\r\n        height={100}\r\n        width={100}\r\n        timeout={5000}\r\n      />\r\n    </LoaderSpinner>\r\n  );\r\n}\r\n\r\nexport default LoaderIcon;\r\n","//импорт библиотеки axios\r\nimport axios from \"axios\";\r\n\r\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\r\nconst KEY = \"22803693-8c4edbce38da2fef7cf44b0fa\";\r\n\r\n//функция для запроса на сервер\r\nfunction getPictures(query, page) {\r\n  return axios\r\n    .get(\r\n      `?key=${KEY}&q=${query}&image_type=photo&orientation=horizontal&page=${page}&per_page=12`\r\n    )\r\n    .then((response) => response.data.hits);\r\n}\r\n\r\nconst api = {\r\n  getPictures,\r\n};\r\n\r\nexport default api;\r\n","import React, { Component } from \"react\";\n//импортируем библиотеку\nimport Loader from \"react-loader-spinner\";\n\nimport ImageGallery from \"./components/ImageGallery\";\nimport Modal from \"./components/Modal\";\nimport Searchbar from \"./components/Searchbar\";\nimport Button from \"./components/Button\";\nimport LoaderIcon from \"./components/Loader\";\n\nimport api from \"./services/pixabay-api\";\n\nclass App extends Component {\n  state = {\n    query: \"\",\n    images: [],\n    page: 1,\n    error: null,\n    isLoading: false,\n    showModal: false,\n    largeImage: \"\",\n  };\n\n  // метод для сохранения поиска\n  handleSearchBarSubmit = (query) => {\n    this.setState({\n      query: query,\n      // page: 1,\n      // images: [],\n    });\n  };\n\n  // //метод запроса на сервер\n  componentDidUpdate(prevProps, prevState) {\n    const prevSearch = prevState.query;\n    const nextSearch = this.state.query;\n    if (prevSearch !== nextSearch) {\n      this.getPictures();\n    }\n    // проверка для плавного скролла\n    if (prevState.page !== this.state.page) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: \"smooth\",\n      });\n    }\n  }\n\n  getPictures = () => {\n    const { query, page } = this.state;\n\n    this.setState({\n      isLoading: true,\n    });\n\n    api\n      .getPictures(query, page)\n      .then((response) =>\n        this.setState((prevState) => ({\n          images: [...prevState.images, ...response],\n          page: prevState.page + 1,\n        }))\n      )\n      .catch((error) => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  reset = () => {\n    this.setState({\n      images: [],\n      page: 1,\n    });\n  };\n\n  toggleShowModal = () => {\n    this.setState((prevState) => ({\n      showModal: !prevState.showModal,\n    }));\n  };\n\n  onOpenModal = (e) => {\n    this.setState({\n      largeImage: e.target.dataset.img,\n    });\n    this.toggleShowModal();\n  };\n\n  render() {\n    const { images, largeImage, isLoading, showModal } = this.state;\n\n    return (\n      <div>\n        <Searchbar onSubmit={this.handleSearchBarSubmit} reset={this.reset} />\n        {isLoading && <LoaderIcon />}\n        <ImageGallery images={images} onOpenModal={this.onOpenModal} />\n        {images.length > 0 && <Button onClick={this.getPictures} />}\n\n        {showModal && (\n          <Modal onClick={this.toggleShowModal}>\n            <img src={largeImage} alt=\"\" />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}